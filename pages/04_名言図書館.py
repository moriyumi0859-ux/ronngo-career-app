import streamlit as st
import base64
import os
from utils.constants import (set_background, set_main_card_style, set_sidebar_background,set_sidebar_nav_title)


# ==============================
# ページ設定
# ==============================
st.set_page_config(
    page_title="名言図書館",
    page_icon="📚",
)

set_background("assets/background/koushi_room.png")
set_main_card_style(padding_top=1.0)
set_sidebar_background()
set_sidebar_nav_title("メニュー")

# ==============================
# 名言データ（20個）＋ 7ベクトル
# ==============================
QUOTES = [
    # ===== 学び・探究ベクトル =====
    {
        "id": 1,
        "title": "学び続けるよろこび",
        "original": "学びて時にこれを習う、また説ばしからずや。",
        "reading": "まなびて ときに これを ならう、また よろこばしからずや。",
        "meaning": "学んだことを、その場かぎりにせず、折を見て何度も振り返ることで、心は自然と満たされていく。",
        "business": "新しい知識を得て終わりにせず、仕事の中で『試す・使う・振り返る』までをセットにすると、成長の実感が大きくなります。毎週1つだけでも「試したことメモ」を残してみましょう。",
        "theme": "学び・成長",
        "vector": "学び・探究",
    },
    {
        "id": 13,
        "title": "誰からも学べる姿勢",
        "original": "三人行えば、必ず我が師有り。",
        "reading": "さんにん ゆけば、かならず わが し あり。",
        "meaning": "三人いれば、その中には必ず自分の学びになる人がいる。",
        "business": "年齢や役職に関わらず、『この人から何が学べるかな？』という視点で関わると、日常の会話や打合せが“学びの場”に変わります。",
        "theme": "学び・謙虚さ",
        "vector": "学び・探究",
    },
    {
        "id": 18,
        "title": "知らないと言える強さ",
        "original": "知之を知ると為し、知らざるを知らずと為す。",
        "reading": "これを しるを しると なし、しらざるを しらずと なす。",
        "meaning": "知っていることは知っていると言い、知らないことは知らないと言う。それが本当の知である。",
        "business": "知らないことを『知らない』と言える人ほど、早く学んで成長していきます。分かったふりをやめて、素直に質問することが、結果的に信頼にもつながります。",
        "theme": "謙虚さ・学び",
        "vector": "学び・探究",
    },

    # ===== 仕事観・モチベーションベクトル =====
    {
        "id": 2,
        "title": "真の理解とは",
        "original": "これを知る者はこれを好む者に如かず。これを好む者はこれを楽しむ者に如かず。",
        "reading": "これを しるものは これを このむものに しかず。これを このむものは これを たのしむものに しかず。",
        "meaning": "ただ知っているだけの人より、それを好きな人が優れ、さらにそれを楽しんでいる人にはかなわない。",
        "business": "仕事を『やらされごと』から『自分なりの楽しみどころ探し』に変えていくと、集中力も成果も変わってきます。今の仕事の中で「ここだけはちょっと好きかも」というポイントを探してみましょう。",
        "theme": "仕事観・モチベーション",
        "vector": "仕事観・モチベーション",
    },
    {
        "id": 10,
        "title": "続けることで見える景色",
        "original": "譬えば道を為すが如し。これを平らぐる無しんば、止むこと勿れ。",
        "reading": "たとえば みちを なすが ごとし。これを たいらぐる なければ、やむこと なかれ。",
        "meaning": "道をならしていくように、まだデコボコがあるなら、そこでやめてはいけない。",
        "business": "新しい取り組みは、最初は成果が見えにくいものです。『まだ道の途中なんだ』と捉えて、一定期間は続けてみることで、ようやく手応えが生まれます。",
        "theme": "継続・習慣",
        "vector": "仕事観・モチベーション",
    },
    {
        "id": 20,
        "title": "楽しむ者にはかなわない",
        "original": "之を楽しむ者に如かず。",
        "reading": "これを たのしむもの に しかず。",
        "meaning": "結局のところ、楽しんでいる者にはかなわない。",
        "business": "完璧に楽しめなくても、『どうすれば少しでもマシにできるか』と工夫していくことで、仕事の景色は少しずつ変わっていきます。",
        "theme": "仕事観・モチベーション",
        "vector": "仕事観・モチベーション",
    },

    # ===== 信頼・誠実ベクトル =====
    {
        "id": 3,
        "title": "信頼がすべての土台",
        "original": "民、これ無くんば、吾、何をもって立たんや。",
        "reading": "たみ、これ なくんば、われ、なにをもって たたんや。",
        "meaning": "人々の信頼がなければ、自分も組織も立ち行かない。",
        "business": "短期的な成果以上に、『この人となら一緒に働きたい』と思われる信頼が大きな資産になります。約束を守る・話をきちんと聞く・小さな感謝を伝える、といった行動が信頼の貯金になります。",
        "theme": "信頼・人間関係",
        "vector": "信頼・誠実",
    },
    {
        "id": 11,
        "title": "自分を整える",
        "original": "其の身正しければ、令せずして行われる。",
        "reading": "その み ただしければ、れい せずして おこなわれる。",
        "meaning": "自分のあり方が正しければ、命令しなくても周りは自然と動いてくれる。",
        "business": "リーダーとしての一貫した姿勢は、どんな言葉よりも強いメッセージになります。小さな行動の積み重ねが、周囲の空気を変えていきます。",
        "theme": "リーダーシップ",
        "vector": "信頼・誠実",
    },
    {
        "id": 14,
        "title": "言葉と行動をそろえる",
        "original": "言うことは忠信にして、行うことは篤敬なり。",
        "reading": "いうことは ちゅうしん にして、おこなうことは とっけい なり。",
        "meaning": "言葉は誠実であり、行動は丁寧であるべきだ。",
        "business": "丁寧な言葉遣いと、約束を守る行動が揃うことで、信頼の厚みが増していきます。口先だけになっていないか、ふと立ち止まってみることも大切です。",
        "theme": "マナー・信頼",
        "vector": "信頼・誠実",
    },

    # ===== チームワーク・リーダーシップベクトル =====
    {
        "id": 4,
        "title": "和して同ぜず",
        "original": "君子は和して同ぜず。小人は同じて和せず。",
        "reading": "くんしは わして どうぜず。しょうじんは どうじて わせず。",
        "meaning": "立派な人は、調和は図るが、ただ周囲と同じ意見に合わせるだけではない。",
        "business": "空気を乱さないことは大切ですが、『本当に大事だと思うこと』を一度も口にしないと、信頼も存在感も薄くなっていきます。賛成したうえで、一言だけ自分の視点を添えてみましょう。",
        "theme": "チームワーク・調整",
        "vector": "チームワーク・リーダーシップ",
    },
    {
        "id": 7,
        "title": "人を見る眼",
        "original": "これを観て、これを察すれば、これ人を知ること有らん。",
        "reading": "これを みて、これを さっすれば、これ ひとを しること あらん。",
        "meaning": "その人の行いをよく観察し、その背景を推し量ることで、人となりが見えてくる。",
        "business": "肩書きや第一印象だけで人を判断してしまうと、大事な才能を見逃してしまいます。日々の小さな行動や、一貫している言葉に目を向けることで、相手の強みが見えてきます。",
        "theme": "マネジメント・評価",
        "vector": "チームワーク・リーダーシップ",
    },
    {
        "id": 19,
        "title": "人を立てるリーダーシップ",
        "original": "己の立たんと欲して、人を立て、己の達せんと欲して、人を達す。",
        "reading": "おのれの たたんと ほっして、ひとを たて、おのれの たっせんと ほっして、ひとを たっす。",
        "meaning": "自分が立ちたいと思うなら、まず人を立て、自分が成功したいと思うなら、まず人の成功を助けなさい。",
        "business": "自分の成果だけでなく、周囲の成功に貢献する姿勢は、長期的な信頼と評価につながります。誰かをそっと後押しすることが、めぐりめぐって自分の力にもなっていきます。",
        "theme": "支援・リーダーシップ",
        "vector": "チームワーク・リーダーシップ",
    },

    # ===== 感情・メンタルケアベクトル =====
    {
        "id": 8,
        "title": "怒りに支配されない",
        "original": "小不忍、則ち大謀を乱す。",
        "reading": "しょう しのばざれば、すなわち たいぼう を みだす。",
        "meaning": "小さな我慢ができないと、大きな計画を台無しにしてしまう。",
        "business": "感情のままに反応した一言やメールが、信頼やプロジェクトを壊してしまうことがあります。イラっとしたときほど、ひと呼吸おいてから返すクセをつけると、長期的に大きな差になります。",
        "theme": "感情・メンタル",
        "vector": "感情・メンタルケア",
    },
    {
        "id": 17,
        "title": "時間は川のように流れる",
        "original": "逝く者はかくの如きか。昼夜を舎てず。",
        "reading": "ゆくものは かくの ごときか。ちゅうや を さてず。",
        "meaning": "流れ去る川のように、時は昼も夜も止まらない。",
        "business": "『いつかやろう』と思っていることほど、永遠に始まりません。完璧な準備よりも、今日中に30分だけ着手してみることで、未来の自分がぐっと楽になります。",
        "theme": "時間・先送り",
        "vector": "感情・メンタルケア",
    },

    # ===== 失敗・改善ベクトル =====
    {
        "id": 6,
        "title": "小さな一歩の積み重ね",
        "original": "之を行うに、又たこれを以てせざるか。",
        "reading": "これを おこなうに、また これを もって せざるか。",
        "meaning": "良いと知ったことは、実際の行動に移さない手はない。",
        "business": "『知っているけれど、やっていないこと』が多いほど、自己評価は下がっていきます。完璧な計画よりも、今日ひとつだけ行動に移すことを大事にしてみましょう。",
        "theme": "行動・実行力",
        "vector": "失敗・改善",
    },
    {
        "id": 12,
        "title": "完璧でなくてよい",
        "original": "過ちて改めざる、是を過ちと謂う。",
        "reading": "あやまちて あらためざる、これを あやまち と いう。",
        "meaning": "失敗そのものではなく、改めようとしないことこそが本当の失敗である。",
        "business": "ミスを恐れて動けないよりも、失敗してから素直に修正する方が、仕事は早く前に進みます。『すぐ謝る・すぐ直す』をセットにしておくと、かえって信頼が深まることもあります。",
        "theme": "失敗・リカバリー",
        "vector": "失敗・改善",
    },
    {
        "id": 5,
        "title": "器にとどまらない生き方",
        "original": "君子は器ならず。",
        "reading": "くんしは うつわ ならず。",
        "meaning": "立派な人は、決まった役割や枠にはまりきった存在ではない。",
        "business": "『自分の職種だから』『担当だから』と役割で自分を縛りすぎると、成長の幅が狭くなります。少しだけ周辺領域に手を伸ばし、自分なりのスタイルを育てていくことが、変化の時代の強みになります。",
        "theme": "キャリア・自己成長",
        "vector": "失敗・改善",
    },

    # ===== 人間関係・コミュニケーションベクトル =====
    {
        "id": 9,
        "title": "聞く力の大切さ",
        "original": "これを聴くに、其の言を信ずることなかれ。",
        "reading": "これを きくに、その げん を しんずること なかれ。",
        "meaning": "聞いたことを、そのまま鵜呑みにしてはいけない。",
        "business": "情報が多い時代ほど、『誰が、どの立場で、何を言っているのか』を一度立ち止まって考えることが重要です。ひとつの声ではなく、複数の視点を集めてから判断するクセをつけていきましょう。",
        "theme": "情報・判断",
        "vector": "人間関係・コミュニケーション",
    },
    {
        "id": 15,
        "title": "良心と向き合う勇気",
        "original": "自ら反みて、誠なきなば、君命といえども行うことなかれ。",
        "reading": "みずから かえりみて、まこと なき なば、くんめい といえども おこなうこと なかれ。",
        "meaning": "自分が正しくないと思うことは、目上の命令であっても行ってはならない。",
        "business": "上からの指示であっても、自分の良心と矛盾することには慎重であるべきです。違和感を覚えたら、まずは質問や相談という形で声をあげることが第一歩になります。",
        "theme": "倫理・勇気",
        "vector": "人間関係・コミュニケーション",
    },
    {
        "id": 16,
        "title": "相手への配慮",
        "original": "己の欲せざる所、人に施すことなかれ。",
        "reading": "おのれの ほっせざる ところ、ひとに ほどこすこと なかれ。",
        "meaning": "自分がされて嫌なことを、人にしてはならない。",
        "business": "無理な締切の押し付け方や、雑な依頼の仕方は、少しずつ信頼を削っていきます。『自分がされたらどう感じるか』をワンクッション挟むだけで、コミュニケーションの質は大きく変わります。",
        "theme": "配慮・コミュニケーション",
        "vector": "人間関係・コミュニケーション",
    },
]


# ==============================
# UI：ベクトルごとに2〜3個表示
# ==============================
st.title("📚 名言図書館")
st.caption("論語のことばを、現代のビジネスとキャリアの視点から読み解く小さな図書館です。")

st.markdown("---")

# ベクトル一覧
vectors = list({q["vector"] for q in QUOTES})
vectors.sort()

# ⭐ 見出しを大きく・太字で強調（最も自然な方法）
st.markdown(
    "<div style='font-size:1.4rem; font-weight:700; margin-bottom:0.3rem;'>"
    "🔎 テーマを選んでください"
    "</div>",
    unsafe_allow_html=True
)

# selectbox 全体をカードっぽくして浮かせる
st.markdown("""
<style>
/* Selectbox 全体をカードっぽくして浮かせる */
.stSelectbox > div > div {
    border: 1.5px solid rgba(0,0,0,0.18) !important;
    border-radius: 8px !important;
    box-shadow: 0 3px 8px rgba(0,0,0,0.12) !important;
}

/* ホバー時にふんわり色づく */
.stSelectbox > div:hover > div {
    border-color: rgba(0,0,0,0.35) !important;
    box-shadow: 0 4px 10px rgba(0,0,0,0.18) !important;
}
</style>
""", unsafe_allow_html=True)


# ⭐ selectbox のラベルを太字で目立たせる
selected_vector = st.selectbox(
    "**▼ テーマ一覧**",
    vectors
)

# 選択されたベクトルの名言を取得
vector_quotes = [q for q in QUOTES if q["vector"] == selected_vector]

st.markdown(f"### 📕 「{selected_vector}」に属する名言")

# 表示部分
for q in vector_quotes:
    st.markdown("---")
    st.markdown(f"#### 💬 {q['title']}")
    st.markdown("**原文（論語）**")
    st.markdown(f"> {q['original']}")
    st.caption(f"【読み】{q['reading']}")

    st.markdown("**現代語の意味**")
    st.write(q["meaning"])

    st.markdown("**ビジネス・キャリアへのヒント**")
    st.write(q["business"])

    st.markdown(f"🗂 テーマ： *{q['theme']}*")


